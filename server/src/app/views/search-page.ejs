<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Buscar - Maratomator</title>
        <link rel="icon" href="/img/logo-icon.png">
        
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="/css/search-page.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        <link href="https://fonts.googleapis.com/css2?family=Gothic+A1:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
        <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"> </script>
    </head>
    <body>      
        <script src="https://kit.fontawesome.com/afd9d2c121.js" crossorigin="anonymous"></script>           
        <div class="container">
            <div id="divFaixa">
                <div id="divAccessibility">
                    <div class="div-font-size"><button class="A+ accessibility-icon">A+</button></div>
                    <div class="div-font-size"><button class="A accessibility-icon">A</button></div>
                    <div class="div-font-size"><button class="A- accessibility-icon">A-</button></div>
                    <div class="div-font-size"><button class="material-icons mode-icon">nightlight_round</button></div>
                </div>
            </div>

            <nav id="nav-placeholder">
                <div class="navbar">                        
                    <a href="index.html">
                        <img src="/img/name_with_logo.png" class="logo-image" alt="" >
                    </a>
                    <div class="div-menu">
                        <a href="user-home.html"><h2 class="txt-menu-item">Home</h2></a>
                        <a href="search-page.html"><h2 class="txt-menu-item">Buscar</h2></a>
                    </div>                      
                    <div class="div-menu">
                        <input class="search-input">
                    </div>
                    <div class="div-menu">
                        <a href=""><h2 class="txt-menu-item">Sair</h2></a>
                    </div>          
                </div>
            </nav>
            <div class="divContent">
                <div id="divSearchFilters">
                    <fieldset>
                        <legend class="title">Buscar</legend>
                        <br>
                        <br>
                        <div class="row">
                            <div class="col-4">
                                <label class="txt-label">Título: </label>
                                <br>
                                <input type="text" id="txtTitulo" name="txtTitle" />
                            </div>
                            <div class="col-2">
                                <label class="txt-label">Gênero: </label>
                                <br>
                                <select>
                                    <% genres.forEach((genre) => { %>    
                                        <option value="<%= genre.id %>"><%= genre.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                            <div class="col-2">
                                <label class="txt-label">Lançamento: </label>
                                <br>
                                <input type="text" name="txtYear" />
                            </div>                              
                            <div class="col-2"> 
                                <label class="txt-label">Classificação: </label>
                    
                                <select>
                                    <% classifications.forEach((classification) => { %>    
                                        <option value="<%= classification.order %>"><%= classification.certification %></option>
                                    <% }) %> 
                                </select>
                            </div>                  
                            <div class="col-1">
                                <label class="txt-label">Ordem: </label>
                                <br>
                                <select>
                                    <option value="1">Alfabética Cres.</option>
                                    <option value="2">Alfabética Dec.</option>
                                    <option value="3">Mais Popular</option>
                                    <option value="4">Melhor Classificação</option>
                                    <option value="5">Recentes</option>
                                </select>
                            </div>                          
                        </div>
                        <div class="row">   
                            <div class="col-12 centered">                       
                                <button id="btnSearch" type="button" onclick="location.href=`http://localhost:4444/search?titulo=${$('#txtTitulo').val()}`">Buscar</button>  
                            </div>                      
                        </div>                  
                    </fieldset>
                </div>
                <div id="divResults">
                    <% try {seriesList.forEach((serie) => { %>    
                        <div class="row resultRow">
                            <div class="search-poster">
                                <img alt="" src="https://image.tmdb.org/t/p/original<%=serie.poster_path%>" />
                                <div>
                                    <label><%= serie.name %></label>
                                </div>
                            </div>
                            <div class="divInfo">
                                <label class="txt-label">Gênero: </label><label><%=serie.genre_ids%></label>
                                <br>
                                <label class="txt-label">Lançamento: </label><label><%=serie.first_air_date%></label>
                                <br>
                                <label class="txt-label">Sinopse: </label><label>A série gira em torno de Gumball Watterson, um gato azul de 12 anos de idade, que frequenta a escola secundária na cidade fictícia de Elmore. Acompanhado por seu irmão peixinho, Darwin, os dois frequentemente se vêem envolvidos em várias confusões em torno da cidade, durante o qual eles interagem com os outros membros da família - a irmã, Anais e os pais Nicole e Richard (Ricardo) acompanhados de outros personagens secundários.</label>
                                <br />  
                            </div>                      
                        </div>
                    <% })} catch(ex){console.log('não é uma busca!');} %>
                                                  
                </div>
            </div>
            <footer>
                <div class="centered">
                    <img alt="" src="/img/insta_logo.png">
                    <img alt="" src="/img/twitter_logo.png">
                    <img alt="" src="/img/logo_facebook.png">
                </div>
            </footer>       
        </div>      
        <!--Custom js-->
        <script src="node_modules/layout-management/index.js"></script>
        <script>
            function searchName(){
                console.log($('#txtTitulo').val());
                 $.ajax({
                    type: "GET",
                    url: `http://localhost:4444/search`,
                    data: {
                        titulo: $('#txtTitulo').val()
                    },
                    dataType: 'json'
                })
            }
        </script>
    </body>
</html>
